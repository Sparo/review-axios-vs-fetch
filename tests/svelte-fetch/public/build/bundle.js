(()=>{"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function s(t){return 0===Object.keys(t).length}function a(t){return null==t?"":t}function c(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function d(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function h(){return f(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function g(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function $(t,e){t.value=null==e?"":e}let b;function y(t){b=t}new Set,new Set;const w=[],v=[],x=[],k=[],T=Promise.resolve();let _=!1;function C(t){x.push(t)}let E=!1;const L=new Set;function q(){if(!E){E=!0;do{for(let t=0;t<w.length;t+=1){const e=w[t];y(e),j(e.$$)}for(y(null),w.length=0;v.length;)v.pop()();for(let t=0;t<x.length;t+=1){const e=x[t];L.has(e)||(L.add(e),e())}x.length=0}while(w.length);for(;k.length;)k.pop()();_=!1,E=!1,L.clear()}}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(C)}}const O=new Set;let S,z;function M(t,e){t&&t.i&&(O.delete(t),t.i(e))}function N(t,e,n,o){if(t&&t.o){if(O.has(t))return;O.add(t),S.c.push((()=>{O.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function A(t,n,r){const{fragment:s,on_mount:a,on_destroy:c,after_update:l}=t.$$;s&&s.m(n,r),C((()=>{const n=a.map(e).filter(i);c?c.push(...n):o(n),t.$$.on_mount=[]})),l.forEach(C)}function D(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function I(e,i,r,s,a,c,l=[-1]){const d=b;y(e);const f=i.props||{},h=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:a,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:l,skip_bound:!1};let p=!1;if(h.ctx=r?r(e,f,((t,n,...o)=>{const i=o.length?o[0]:n;return h.ctx&&a(h.ctx[t],h.ctx[t]=i)&&(!h.skip_bound&&h.bound[t]&&h.bound[t](i),p&&function(t,e){-1===t.$$.dirty[0]&&(w.push(t),_||(_=!0,T.then(q)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],h.update(),p=!0,o(h.before_update),h.fragment=!!s&&s(h.ctx),i.target){if(i.hydrate){const t=(m=i.target,Array.from(m.childNodes));h.fragment&&h.fragment.l(t),t.forEach(u)}else h.fragment&&h.fragment.c();i.intro&&M(e.$$.fragment),A(e,i.target,i.anchor),q()}var m;y(d)}"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global,new Set(["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"]),"function"==typeof HTMLElement&&(z=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!s(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class P{$destroy(){D(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){this.$$set&&!s(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}class U{constructor(t={}){this.baseURL=t.baseURL||"http://localhost:3000",this.optionsData={method:"GET",headers:{Accept:"application/json","Content-Type":"application/json;charset=UTF-8"}},this.timeout=4e3}getOptions(t){return Object.assign({},this.optionsData,t)}startTimeoutTimer(t){console.log("second '",(new Date).getSeconds()),setTimeout((()=>{console.log('second "',(new Date).getSeconds()),t.abort()}),this.timeout)}async fetch(t,e,n){const o=new AbortController,i=o.signal,r=this.getOptions({method:e,signal:i});console.log(r),n&&"object"==typeof n&&(r.body=JSON.stringify(n));const s=fetch(`${this.baseURL}${t}`,r);return this.startTimeoutTimer(o),s.then((t=>t.json())).then((t=>Promise.resolve(t))).catch((t=>Promise.reject(t)))}async get(t){try{return await this.fetch(t,"GET")}catch(t){return{isError:!0,...t}}}async post(t,e){try{return await this.fetch(t,"POST",e)}catch(t){return{isError:!0,...t}}}async put(t,e){try{return await this.fetch(t,"PUT",e)}catch(t){return{isError:!0,...t}}}}function X(e){let n;return{c(){n=d("div"),n.innerHTML='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><rect fill="#05c" width="3" height="100" transform="translate(0) rotate(180 3 50)"><animate attributeName="height" attributeType="XML" dur="1s" values="30; 100; 30" repeatCount="indefinite"></animate></rect><rect x="17" fill="#05c" width="3" height="100" transform="translate(0) rotate(180 20 50)"><animate attributeName="height" attributeType="XML" dur="1s" values="30; 100; 30" repeatCount="indefinite" begin="0.1s"></animate></rect><rect x="40" fill="#05c" width="3" height="100" transform="translate(0) rotate(180 40 50)"><animate attributeName="height" attributeType="XML" dur="1s" values="30; 100; 30" repeatCount="indefinite" begin="0.3s"></animate></rect><rect x="60" fill="#05c" width="3" height="100" transform="translate(0) rotate(180 58 50)"><animate attributeName="height" attributeType="XML" dur="1s" values="30; 100; 30" repeatCount="indefinite" begin="0.5s"></animate></rect><rect x="80" fill="#05c" width="3" height="100" transform="translate(0) rotate(180 76 50)"><animate attributeName="height" attributeType="XML" dur="1s" values="30; 100; 30" repeatCount="indefinite" begin="0.1s"></animate></rect></svg>',m(n,"class","wrapper svelte-1uv2kqx")},m(t,e){l(t,n,e)},p:t,i:t,o:t,d(t){t&&u(n)}}}const B=class extends P{constructor(t){super(),I(this,t,null,X,r,{})}};function G(t,e,n){const o=t.slice();return o[15]=e[n],o}function H(e){let n,i,r,s,a,b,y,w,v,x,k,T,_,C,E,L,q,j,O,S,z=e[0].length+"";function M(t,e){return t[1]?F:J}let N=M(e),A=N(e),D=e[0],I=[];for(let t=0;t<D.length;t+=1)I[t]=K(G(e,D,t));return{c(){n=d("div"),i=d("form"),r=d("input"),s=h(),a=d("button"),a.textContent="Add",b=h(),y=d("button"),y.textContent="Get completed todos",w=h(),A.c(),v=h(),x=d("h3"),k=f("Done "),T=f(e[4]),_=f(" of "),C=f(z),E=h(),L=d("i"),L.textContent="← this is reactive heading",q=h(),j=d("ul");for(let t=0;t<I.length;t+=1)I[t].c();m(r,"id","newTodo"),m(r,"type","text"),m(r,"placeholder","type in todo"),m(r,"class","svelte-1nz0qab"),m(a,"type","submit"),m(i,"action",""),m(i,"id","form"),m(L,"class","svelte-1nz0qab"),m(x,"class","svelte-1nz0qab"),m(j,"class","svelte-1nz0qab")},m(t,o){l(t,n,o),c(n,i),c(i,r),$(r,e[3]),c(i,s),c(i,a),c(i,b),c(i,y),c(i,w),A.m(i,null),c(n,v),c(n,x),c(x,k),c(x,T),c(x,_),c(x,C),c(x,E),c(x,L),c(n,q),c(n,j);for(let t=0;t<I.length;t+=1)I[t].m(j,null);O||(S=[p(r,"input",e[10]),p(y,"click",e[7]),p(i,"submit",e[8])],O=!0)},p(t,e){if(8&e&&r.value!==t[3]&&$(r,t[3]),N===(N=M(t))&&A?A.p(t,e):(A.d(1),A=N(t),A&&(A.c(),A.m(i,null))),16&e&&g(T,t[4]),1&e&&z!==(z=t[0].length+"")&&g(C,z),65&e){let n;for(D=t[0],n=0;n<D.length;n+=1){const o=G(t,D,n);I[n]?I[n].p(o,e):(I[n]=K(o),I[n].c(),I[n].m(j,null))}for(;n<I.length;n+=1)I[n].d(1);I.length=D.length}},i:t,o:t,d(t){t&&u(n),A.d(),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(I,t),O=!1,o(S)}}}function R(e){let n,o;return n=new B({}),{c(){var t;(t=n.$$.fragment)&&t.c()},m(t,e){A(n,t,e),o=!0},p:t,i(t){o||(M(n.$$.fragment,t),o=!0)},o(t){N(n.$$.fragment,t),o=!1},d(t){D(n,t)}}}function F(e){let n;return{c(){n=d("span"),n.textContent="Timeout Abort...",m(n,"v-if","timeout"),n.style.setProperty("color","red","")},m(t,e){l(t,n,e)},p:t,d(t){t&&u(n)}}}function J(t){let e,n,o=t[2].map(W)+"";return{c(){e=d("span"),n=f(o)},m(t,o){l(t,e,o),c(e,n)},p(t,e){4&e&&o!==(o=t[2].map(W)+"")&&g(n,o)},d(t){t&&u(e)}}}function K(t){let e,n,o,i,r,s,$,b,y,w,v,x,k=t[15].title+"";return{c(){e=d("li"),n=d("input"),r=h(),s=d("label"),$=f(k),w=h(),m(n,"type","checkbox"),m(n,"id",o=t[15].id),n.checked=i=t[15].completed,m(n,"class","svelte-1nz0qab"),m(s,"for",b=t[15].id),m(s,"class",y=a(t[15].completed&&"strike")+" svelte-1nz0qab"),m(e,"class","svelte-1nz0qab")},m(o,i){l(o,e,i),c(e,n),c(e,r),c(e,s),c(s,$),c(e,w),v||(x=p(n,"change",t[6]),v=!0)},p(t,e){1&e&&o!==(o=t[15].id)&&m(n,"id",o),1&e&&i!==(i=t[15].completed)&&(n.checked=i),1&e&&k!==(k=t[15].title+"")&&g($,k),1&e&&b!==(b=t[15].id)&&m(s,"for",b),1&e&&y!==(y=a(t[15].completed&&"strike")+" svelte-1nz0qab")&&m(s,"class",y)},d(t){t&&u(e),v=!1,x()}}}function Q(t){let e,n,i,r,s,a,f,m;const g=[R,H],$=[];function b(t,e){return t[5]?0:1}return r=b(t),s=$[r]=g[r](t),{c(){e=d("main"),n=d("button"),n.textContent="Back",i=h(),s.c()},m(t,o){l(t,e,o),c(e,n),c(e,i),$[r].m(e,null),a=!0,f||(m=p(n,"click",V),f=!0)},p(t,[n]){let i=r;r=b(t),r===i?$[r].p(t,n):(S={r:0,c:[],p:S},N($[i],1,1,(()=>{$[i]=null})),S.r||o(S.c),S=S.p,s=$[r],s?s.p(t,n):(s=$[r]=g[r](t),s.c()),M(s,1),s.m(e,null))},i(t){a||(M(s),a=!0)},o(t){N(s),a=!1},d(t){t&&u(e),$[r].d(),f=!1,m()}}}function V(){window.history.back()}const W=t=>t.id;function Y(t,e,n){let o,i;const r=new U;let s=[],a=!1,c=[],l="",u={userId:null,id:null,title:"",completed:!1},d=!1;var f;return f=async()=>{n(0,s=await r.get("/todos"))},function(){if(!b)throw new Error("Function called outside component initialization");return b}().$$.on_mount.push(f),t.$$.update=()=>{1&t.$$.dirty&&n(4,o=s.filter((t=>t.completed)).length),1&t.$$.dirty&&n(5,i=0===s.length)},[s,a,c,l,o,i,function(t){const e=t.target;n(0,s=s.map((t=>(t.id==e.id&&(t.completed=e.checked,r.put(`/todo/${t.id}`,t)),t))))},async function(t){t.preventDefault(),d=!0,n(2,c=await r.get("/todos/completed")),c.isError&&(n(2,c=[]),n(1,a=!0)),d=!1},function(t){t.preventDefault(),async function(){if(l){const t=Object.assign({},u,{userId:1,id:s.length+1,title:l,completed:!1});n(0,s[s.length]=t,s),n(3,l=""),await r.post("/todo",t)}}(),document.getElementById("newTodo").focus()},1,function(){l=this.value,n(3,l)}]}new class extends P{constructor(t){super(),I(this,t,Y,Q,r,{userId:9})}get userId(){return this.$$.ctx[9]}}({target:document.body,props:{userId:1}})})();